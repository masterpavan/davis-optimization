/* Copyright © 2004-2015 Trumba Corporation. All rights reserved. */
var INFO=0;var WARN=1;var ERROR=2;function html2Text(a){a=a.replace(new RegExp("<","g"),"&lt;");return a}function log(msg,sev){sev=sev||INFO;try{eval("window.parent.$Trumba.logger."+(sev==ERROR?"error":(sev==WARN?"warning":"info"))+"(msg);");return}catch(e){}if(typeof(dbg_log)=="function"){dbg_log(msg,sev)}}function logObject(b,a){if(typeof(dbg_logObject)=="function"){dbg_logObject(b,INFO,a)}}function warn(a){log(a,WARN)}function error(a){log(a,ERROR)}if(!window.console){console={log:function(){}}}function $(d){var a=[];for(var c=0;c<arguments.length;c++){var b=arguments[c];if(typeof(b)=="string"){b=document.getElementById(b)}a.push(b)}if(a.length==1){return a[0]}return a}function GoodEscape(a){return encodeURIComponent(a).replace(new RegExp("\\+","g"),"%2B").replace(new RegExp('\\"',"g"),"%22").replace(new RegExp("\\'","g"),"%27").replace(new RegExp("\\/","g"),"%2F")}var tBrowser=new TBrowser();var tWindow=new TWindow();var windowLoaded=false;var trumba_hookLoadHandler=function(){if(document.body==null){window.setTimeout(trumba_hookLoadHandler,100);return}if(document.body.className==""){document.body.className=tBrowser.firefox?"ff":tBrowser.safari?"safari":tBrowser.ie?"ie ie"+tBrowser.ieVersion:"other"}windowLoaded=true};function trumba_hookLoad(){try{if(window.addEventListener){window.addEventListener(tBrowser.firefox?"DOMContentLoaded":"load",trumba_hookLoadHandler,true)}else{if(window.attachEvent){window.attachEvent("onload",trumba_hookLoadHandler)}}}catch(a){windowLoaded=true}}trumba_hookLoad();function TWindow(a){this.window=a?a:window}TWindow.prototype.Width=function(){return tBrowser.ie?document.documentElement.offsetWidth:Math.min(window.innerWidth,window.outerWidth)};TWindow.prototype.Height=function(){return tBrowser.ie?document.documentElement.offsetHeight:window.innerHeight};TWindow.prototype.ScrollX=function(){return tBrowser.ie||tBrowser.opera?document.documentElement.scrollLeft:window.scrollX};TWindow.prototype.ScrollY=function(){return tBrowser.ie||tBrowser.opera?document.documentElement.scrollTop:window.scrollY};function TBrowser(){var b=navigator.userAgent.toLowerCase();this.windows=b.indexOf("win")!=-1?true:false;this.mac=b.indexOf("mac")!=-1?true:false;this.unix=b.indexOf("x11")!=-1?true:false;this.version=parseInt(navigator.appVersion);this.opera=b.indexOf("opera")!=-1?true:false;if(navigator.userAgent.indexOf("Opera/")!=-1){this.operaVersion=parseFloat(navigator.userAgent.split("Opera/")[1])}else{if(navigator.userAgent.indexOf("Opera ")!=-1){this.operaVersion=parseFloat(navigator.userAgent.split("Opera ")[1])}else{this.operaVersion=parseFloat(navigator.appVersion)}}this.operacss2dom=this.opera&&(this.operaVersion>=9);this.firefox=b.indexOf("firefox")!=-1?true:false;this.safari=b.indexOf("safari")!=-1?true:false;this.ie=(document.all&&!this.opera)?true:false;this.ns4=document.layers?true:false;this.dom=document.getElementById?true:false;this.css2dom=(document.implementation&&!this.safari)?document.implementation.hasFeature("CSS2","2.0"):false;this.css2iedom=(document.all&&this.ie)?true:false;this.ieVersion=(navigator.appVersion.split("MSIE").length==2)?parseFloat(navigator.appVersion.split("MSIE")[1]):null;if(this.ie&&this.ieVersion==7&&typeof(document.documentMode)!="undefined"){this.ieVersion=8}this.ie6=(this.ie&&this.ieVersion<7);this.ie7=(this.ie&&(this.ieVersion>=7&&this.ieVersion<8));this.ie8=(this.ie&&this.ieVersion>=8);var a=b.match(/safari\/(\d+\.\d+)/i);this.oldSafari=(a!=null)&&(a.length==2)&&(parseFloat(a[1])<313);this.dumbBrowser=this.ie&&this.mac}function TCookie(f,b,a,e,c,d){this.$document=f;this.$name=b;if(a){this.$expiration=new Date((new Date()).getTime()+a*3600000)}else{this.$expiration=null}if(e){this.$path=e}else{this.$path=null}if(c){this.$domain=c}else{this.$domain=null}if(d){this.$secure=d}else{this.$secure=null}}TCookie.prototype.Store=function(){var b="";for(var c in this){if((c.charAt(0)=="$")||(typeof(this[c])=="function")){continue}if(b!=""){b+="&"}b+=c+":"+GoodEscape(this[c])}var a=this.$name+"="+b;if(this.$expiration){a+="; expires="+this.$expiration.toGMTString()}if(this.$path){a+="; path="+this.$path}if(this.$domain){a+="; domain="+this.$domain}if(this.$secure){a+="; secure="+this.$secure}this.$document.cookie=a};TCookie.prototype.Load=function(){var e=this.$document.cookie;if(e==""){return false}var g=e.indexOf(this.$name+"=");if(g==-1){return false}g+=this.$name.length+1;var c=e.indexOf(";",g);if(c==-1){c=e.length}var f=e.substring(g,c);var b=f.split("&");for(var d=0;d<b.length;d++){b[d]=b[d].split(":")}for(var d=0;d<b.length;d++){this[b[d][0]]=decodeURIComponent(b[d][1])}return true};TCookie.prototype.Remove=function(){var a=this.$name+"=";if(this.$path){a+="; path="+this.$path}if(this.$domain){a+="; domain="+this.$domain}a+="; expires="+new Date(0).toGMTString();this.$document.cookie=a};function TQueryString(){this.pairs=[]}function TQueryString(a){this.from(a)}TQueryString.prototype.from=function(c){this.pairs=[];if(c==null||c==""){return}if(c.indexOf("?")==0){c=c.substring(1)}c=c.split("&");for(var b=0;b<c.length;b++){if(c[b]!=""){var a=c[b].split("=");if(a.length==1){this.pairs.push([decodeURIComponent(a[0]),null])}else{this.pairs.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])])}}}};TQueryString.prototype.isEmpty=function(){return this.pairs.length==0};TQueryString.prototype.setAt=function(a,c){var b=this.findByName(a);if(b!=-1){this.pairs[b][1]=c}else{this.pairs.push([a,c])}};TQueryString.prototype.to=function(){var b=new Array(this.pairs.length);for(var a=0;a<b.length;a++){if(this.pairs[a][1]==null){b[a]=GoodEscape(this.pairs[a][0])}else{b[a]=GoodEscape(this.pairs[a][0])+"="+GoodEscape(this.pairs[a][1])}}return b.join("&")};TQueryString.prototype.getAt=function(a){if(typeof(a)=="string"){a=this.findByName(a);if(a==-1){return null}}return this.pairs[a]};TQueryString.prototype.removeAt=function(b){var a=[];for(var c=0;c<this.pairs.length;c++){if(c!=b){a.push(this.pairs[c])}}this.pairs=a};TQueryString.prototype.length=function(){return this.pairs.length};TQueryString.prototype.findByName=function(a){for(var b=0;b<this.pairs.length;b++){if(this.pairs[b][0]==a){return b}}return -1};TQueryString.prototype.insert=function(a){for(var b=0;b<a.length();b++){var c=a.getAt(b);this.setAt(c[0],c[1])}};TQueryString.prototype.subtract=function(a){for(var b=0;b<a.length();b++){var b=this.findByName(a.getAt(b)[0]);if(b!=-1){this.removeAt(b)}}};TQueryString.prototype.prefixWith=function(b){for(var a=0;a<this.pairs.length;a++){this.pairs[a][0]=b+this.pairs[a][0]}};TQueryString.prototype.visit=function(a){for(var b=0;b<this.pairs.length;b++){a(this.pairs[b][0],this.pairs[b].length>1?this.pairs[b][1]:null)}};function TLocation(a){var b;b=a.indexOf("#");if(b>=0){this.hash=a.substring(b);a=a.substring(0,b)}else{this.hash=""}b=a.indexOf("?");if(b>=0){this.search=new TQueryString(a.substring(b));a=a.substring(0,b)}else{this.search=new TQueryString()}this.path=a}TLocation.prototype.Search=function(){return this.search};TLocation.prototype.To=function(){return this.path+"?"+this.search.to()+this.hash};function CookieCheck(a){var b=new TCookie(a,"cookieCheck");b.check=1;b.Store();if(b.Load()){b.Remove();return true}return false}function TableExpand(c,e,d,b){if(c==null){return}for(var a=b;a<c.rows.length;a++){c.rows.item(a).style.visibility="visible";c.rows.item(a).style.display="table-row"}if(e!=null){e.src="images/checkminus.gif";e.title="Click to hide this section."}if(d!=null){d.value="0"}}function TableCollapse(c,e,d,b){if(c==null){return}for(var a=b;a<c.rows.length;a++){c.rows.item(a).style.visibility="collapse";c.rows.item(a).style.display="none"}if(e!=null){e.src="images/checkplus.gif";e.title="Click to show this section."}if(d!=null){d.value="1"}}function TableToggleState(b,d,c,a){if(c.value=="0"){TableCollapse(b,d,c,a)}else{TableExpand(b,d,c,a)}}function TableSetState(b,d,c,a){if(c.value=="0"){TableExpand(b,d,null,a)}else{TableCollapse(b,d,null,a)}}function createRow(e,c){var f;var g=e.ownerDocument;if(tBrowser.dumbBrowser){var b;for(var d=0;d<e.childNodes.length;d++){var a=e.childNodes[d];if(a.tagName&&a.tagName.toUpperCase()=="TBODY"){b=a;break}}if(b==null){b=e.insertBefore(g.createElement("tbody"),null)}f=b.insertBefore(g.createElement("tr"),findNthElement(b,c))}else{if(e.tBodies[0]==null){e.insertBefore(g.createElement("tbody"),null)}f=e.tBodies[0].insertRow(c)}return f}function createCell(b,a){if(tBrowser.dumbBrowser){return b.insertBefore(b.ownerDocument.createElement("td"),findNthElement(b,a))}return b.insertCell(b.cells.length)}function findNthElement(c,a){var d=c.firstChild;var b=0;while(d){if(d.tagName){if(b==a){return d}b++}d=d.nextSibling}return null}function findParent(b,a){while(b.parentNode&&(!b.tagName||(b.tagName.toUpperCase()!=a.toUpperCase()))){b=b.parentNode}return b}function findChild(b,a){var d=b.firstChild;while(d){if(d.tagName&&d.tagName.toUpperCase()==a.toUpperCase()){return d}else{var c=findChild(d,a);if(c){return c}}d=d.nextSibling}return null}function navtolayout(a){window.location.href=a.options[a.selectedIndex].value}function navtovalue(a){tqs=new TLocation(trumba_baseUrl);tqs.Search().setAt("zone",a.options[a.selectedIndex].value);window.location.href=tqs.To()}function navstacktovalue(a){tqs=new TLocation(trumba_baseUrl);tqs.Search().setAt("0.zone",a.options[a.selectedIndex].value);window.location.href=tqs.To()}function navselecttovalue(a){tqs=new TLocation(trumba_baseUrl);tqs.Search().setAt("select",a.options[a.selectedIndex].value);window.location.href=tqs.To()}function navselecttothis(a){tqs=new TLocation(trumba_baseUrl);tqs.Search().setAt("select",a);window.location.href=tqs.To()}function navtoselectedvalue(a){window.location.href=a.options[a.selectedIndex].value}function jsNav(a){window.location.href=a}function hvLinkBack(b,a){b.style.backgroundColor=a;b.style.cursor="pointer"}function unhvLinkBack(b,a){b.style.backgroundColor=a;b.style.cursor=""}function FixPngInIe(a){if(tBrowser.ie&&a.style.filter==""){a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.src+"', sizingMethod='crop')";a.src="images/cleardot.gif"}}var Trumba={Version:1,emptyFunction:function(){}};Trumba.Class={create:function(){return function(){this.initialize.apply(this,arguments)}},extend:function(a,b){for(property in b){a[property]=b[property]}return a},addNamespace:function(n){var parts=n.split(".");var root=window;for(var i=0;i<parts.length;i++){if(root[parts[i]]==null){eval("root."+parts[i]+" = { };")}root=root[parts[i]]}}};Function.prototype.bind=function(){var a=this,c=$A(arguments),b=c.shift();return function(){return a.apply(b,c.concat($A(arguments)))}};var $A=Array.from=function(c){if(!c){return[]}if(c.toArray){return c.toArray()}else{var b=[];for(var a=0;a<c.length;a++){b.push(c[a])}return b}};Trumba.Class.extend(Array.prototype,{shift:function(){if(this.length==0){return}var a=this[0];for(var b=0;b<this.length-1;b++){this[b]=this[b+1]}this.length--;return a}});Trumba.Try={these:function(){var c;for(var b=0;b<arguments.length;b++){var a=arguments[b];try{c=a();break}catch(d){}}return c}};Trumba.Class.addNamespace("Trumba.String");Trumba.String={fill:function(e,d){var a=new Array(d);for(var b=0;b<d;b++){a.push(e)}return a.join("")},format:function(){if(arguments.length<=1){return(arguments.length==1)?arguments[0]:""}var a=arguments[0];for(var b=1;b<arguments.length;b++){a=a.replace(new RegExp("\\{"+(b-1)+"}","g"),arguments[b])}return a}};Trumba.Event={};Trumba.Class.extend(Trumba.Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_SPACE:32,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(a){return a.target||a.srcElement},keyCode:function(a){if(a.charCode){return a.keyCode>0?a.keyCode:a.charCode}return a.keyCode},isLeftClick:function(a){return(((a.which)&&(a.which==1))||((a.button)&&(a.button==1)))},pointerX:function(a){return a.pageX||(a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))},pointerY:function(a){return a.pageY||(a.clientY+(document.documentElement.scrollTop||document.body.scrollTop))},stop:function(a){if(a.preventDefault){a.preventDefault();a.stopPropagation()}else{a.returnValue=false;a.cancelBubble=true}},findElement:function(c,b){var a=Trumba.Event.element(c);while(a.parentNode&&(!a.tagName||(a.tagName.toUpperCase()!=b.toUpperCase()))){a=a.parentNode}return a},observers:false,_observeAndCache:function(d,c,b,a){if(!this.observers){this.observers=[]}if(d.addEventListener){this.observers.push([d,c,b,a]);d.addEventListener(c,b,a)}else{if(d.attachEvent){this.observers.push([d,c,b,a]);d.attachEvent("on"+c,b)}}},unloadCache:function(){if(!Trumba.Event.observers){return}for(var a=0;a<Trumba.Event.observers.length;a++){Trumba.Event.stopObserving.apply(this,Trumba.Event.observers[a]);Trumba.Event.observers[a][0]=null}Trumba.Event.observers=false},observe:function(d,c,b,a){var d=$(d);a=a||false;if(c=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||d.attachEvent)){c="keydown"}this._observeAndCache(d,c,b,a)},stopObserving:function(d,c,b,a){var d=$(d);a=a||false;if(c=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||d.detachEvent)){c="keydown"}if(d.removeEventListener){d.removeEventListener(c,b,a)}else{if(d.detachEvent){d.detachEvent("on"+c,b)}}}});Trumba.ScriptXmlHttpRequest=Trumba.Class.create();Trumba.ScriptXmlHttpRequest.prototype={initialize:function(b,a){this.url=b;this.options=a||{};this.options.timeout=this.options.timeout||60;this.cbid=a.cbid||Trumba.ScriptXmlHttpRequest.CreateCBID()},invoke:function(){window.setTimeout(this.onAsyncInvoke.bind(this),1)},onAsyncInvoke:function(){try{this.doGet()}catch(a){(this.options.onFailure||Trumba.emptyFunction)(a)}},doGet:function(){this.script=document.createElement("script");this.script.setAttribute("type","text/javascript");Trumba.ScriptXmlHttpRequest.addCallback(this.cbid,this.onComplete.bind(this));this.timeoutID=window.setTimeout(this.onTimeout.bind(this),this.options.timeout*1000);var b=(/\?/.test(this.url)?"&":"?");this.script.setAttribute("src",this.url+b+"srpc.cbid="+this.cbid+"&srpc.get=true");var a;a=document.getElementsByTagName("head")[0];a.appendChild(this.script)},cleanup:function(){if(this.script.parentNode!=null){this.script.parentNode.removeChild(this.script)}Trumba.ScriptXmlHttpRequest.removeCallback(this.cbid)},onTimeout:function(){this.cleanup();(this.options.onTimeout||Trumba.emptyFunction)()},onComplete:function(b){window.clearTimeout(this.timeoutID);var c=this.cleanup.bind(this);var d=b;var a=(this.options.onSuccess||Trumba.emptyFunction);window.setTimeout(function(){c();a(d)},1)}};if(/(Safari\/)(\d+)/i.test(navigator.userAgent)&&parseFloat(/(Safari\/)(\d+)/i.exec(navigator.userAgent)[2])<=312){Trumba.Class.extend(Trumba.ScriptXmlHttpRequest.prototype,{cleanup:function(){this.innerIFRAME.parentNode.removeChild(this.innerIFRAME);Trumba.ScriptXmlHttpRequest.removeCallback(this.cbid)},doGet:function(){var d=(/\?/.test(this.url)?"&":"?");var a=this.url+d+"srpc.cbid="+this.cbid+"&srpc.get=true";var b='<html><head><script type="text/javascript">\r\nwindow["Trumba"] = { };\r\nTrumba["ScriptXmlHttpRequest"] = { };\r\nTrumba.ScriptXmlHttpRequest.requestComplete = function(result) {window.parent.Trumba.ScriptXmlHttpRequest.requestComplete(result); }\r\ndocument.write(\'<s\'+\'cript type="text/javascript" src="'+a+"\"><'+'/script>');\r\n<\/script>\r\n</head>\r\n<body></body>\r\n</html>\r\n";var e=this;var c=function(){if(document.body==null){window.setTimeout(arguments.callee.bind(this),100);return}Trumba.ScriptXmlHttpRequest.addCallback(e.cbid,e.onComplete.bind(e));e.timeoutID=window.setTimeout(e.onTimeout.bind(e),e.options.timeout*1000);var f=Trumba.Spuds.createIFrame(e.cbid=".iframe","width:0px;height:0px;visibility:hidden;");e.innerIFRAME=document.body.appendChild(f);var g;if(e.innerIFRAME.contentWindow){g=e.innerIFRAME.contentWindow.document}else{g=window.frames[e.innerIFRAME.name].document}g.write(b);g.close()};c()}})}Trumba.ScriptXmlHttpRequest.rpcID=0;Trumba.ScriptXmlHttpRequest.rpcGUID=""+Math.random();Trumba.ScriptXmlHttpRequest.callbacks={};Trumba.ScriptXmlHttpRequest.requestComplete=function(result){result=eval(result);Trumba.ScriptXmlHttpRequest.callbacks[result.cbid](result)};Trumba.ScriptXmlHttpRequest.addCallback=function(b,a){Trumba.ScriptXmlHttpRequest.callbacks[b]=a};Trumba.ScriptXmlHttpRequest.removeCallback=function(a){Trumba.ScriptXmlHttpRequest.callbacks[this.cbid]=null;delete Trumba.ScriptXmlHttpRequest.callbacks[this.cbid]};Trumba.ScriptXmlHttpRequest.CreateCBID=function(){var a=Trumba.ScriptXmlHttpRequest.rpcGUID;a+="-"+Trumba.ScriptXmlHttpRequest.rpcID++;return a};Trumba.Spuds={_popupDIV:null,POPUP_DIV_ID:"_trumba_spuds_popup_",createIFrame:function(c,b){var a=document.createElement("iframe");a.setAttribute("id",c);a.setAttribute("name",c);a.frameBorder="no";a.setAttribute("width","100%");a.setAttribute("scrolling","no");a.setAttribute("marginheight","0");a.setAttribute("marginwidth","0");a.setAttribute("allowtransparency","true");if(b){a.setAttribute("style",b)}return a},alignPopUp:function(d,c,b){var a=c;switch(d){case 1:case 2:case 3:a.top=(b.top+b.height);break;case 5:case 6:case 7:a.top=(b.top-c.height);break;default:a.top=(b.top+(b.height-c.height)/2);break}switch(d){case 2:case 6:a.left=(b.left+(b.width-c.width)/2);break;case 4:a.left=(b.left-c.width-3);break;case 3:case 5:a.left=(b.left+b.width-c.width);break;default:a.left=(b.left+b.width);break}},clipPopupToScreen:function(e,f){var f=this._getWindowSize(f);var b=23;f.width-=b;f.height-=b;var a=e.left-f.scrollX;var c=e.top-f.scrollY;var d=(a+e.width)-f.width;e.left=Math.max(e.left-(d>0?d:0),f.scrollX);d=(c+e.height)-f.height;e.top=Math.max(e.top-(d>0?d:0),f.scrollY);return e},_getWindowSize:function(b){b=b||window.parent;var a=b.document;return{width:(b.innerWidth?Math.min(b.innerWidth,b.outerWidth):a.documentElement.offsetWidth),height:(b.innerHeight?b.innerHeight:a.documentElement.offsetHeight),scrollX:(b.pageXOffset||a.documentElement.scrollLeft||a.body.scrollLeft||0),scrollY:(b.pageYOffset||a.documentElement.scrollTop||a.body.scrollTop||0)}},getSpudLocation:function(){return mySpud.container.getLocation()},getElementOffset:function(c){c=$(c);var d=this.getSpudLocation();var a=mySpud.container.getScroll();var b=getTotalOffset(c);return{left:d.left+b.left-a.left,top:d.top+b.top-a.top,width:c.offsetWidth,height:c.offsetHeight}},_showPopup:function(e,d,g){if(controller){var b=controller.getSpuds();for(var c=0;c<b.length;c++){if(b[c].getProperty("closeOnNav")){b[c].close()}}}var h={onResize:this._onResize,_spud:null,_position:null};this.alignPopUp(g,e.position,d);h._position={left:e.position.left,top:e.position.top,width:e.position.width,height:e.position.height};this.clipPopupToScreen(e.position);if(window.parent.$Trumba){var f=window.parent.$Trumba.addSpud(e);var a=window.parent.$Trumba.Spuds.controller.getSpudById(f);h._spud=a;a.container.addEventListener("resize",h.onResize.bind(h));return a}},buildSpudData:function(h,j){var e=h.getAttribute("spudname");var d={webName:mySpud.webName,spudType:e,spudId:this.POPUP_DIV_ID,position:{left:0,top:0,width:parseInt(h.getAttribute("spudwidth"))},lateAdd:true,cache:true,closeOnNav:true,closeOnFocus:true,hideBusyImage:false,spudElementId:h.id,url:{}};if(h.getAttribute("popupHTML")){d.popupHTML=h.getAttribute("popupHTML")}if(mySpud.getProperty("teaserBase")){d.teaserBase=mySpud.getProperty("teaserBase")}if(mySpud.getProperty("detailBase")){d.detailBase=mySpud.getProperty("detailBase")}if(mySpud.getProperty("openInNewWindow")){d.openInNewWindow=mySpud.getProperty("openInNewWindow")}var b="webname:"+d.webName+",spudtype:"+d.spudType;var c=new TQueryString(mySpud.getQueryString());c.visit(function(l,k){if(l=="zone"||(e=="daysummary"&&l.substring(0,6)=="filter")){d.url[l]=k}});for(var a=0;a<h.attributes.length;a++){var f=h.attributes[a];if(f.nodeName.substring(0,4)=="url."){var g=f.nodeName.substring(4);d.url[g]=f.nodeValue;b+=","+g+":"+f.nodeValue}}d.popupId=b;return d},getPopupId:function(a){return this.buildSpudData(a).popupId},showPopup:function(f,b,e){f=$(f);if(f.getAttribute("spudname")==null){return}if(!this._popupDIV){var h=window.parent.document.createElement("div");h.id=this.POPUP_DIV_ID;h.style.position="absolute";h.style.height="1px";window.parent.document.body.appendChild(h);this._popupDIV=true}if(!e){e=this.getElementOffset(f)}var d=this.buildSpudData(f,b);var a=Trumba.Spuds._showPopup(d,e,parseInt(f.getAttribute("spudposition")));if(a){var g=function(j){Trumba.Spuds.popupOnMouseOver(j||window.event,f)};Trumba.Event.observe(a.parentDiv,"mouseover",g,false);if(b){var c=function(j){Trumba.Spuds.popupOnMouseOut(j||window.event,f)};Trumba.Event.observe(a.parentDiv,"mouseout",c,false)}a.addEventListener("close",function(){Trumba.Event.stopObserving(a.parentDiv,"mouseover",g,false);if(c){Trumba.Event.stopObserving(a.parentDiv,"mouseout",c,false)}})}},popupOnClick:function(b,a){a=$(a);Trumba.Spuds.showPopup(a,false);Trumba.Event.stop(b||window.event)},popupOnMouseOver:function(f,d){f=f||window.event;d=$(d);Trumba.Event.stop(f);var c=Trumba.Spuds.popupId=this.getPopupId(d);if(controller&&controller.findSpud("popupId",c)){return}if(d._loading){return}d._loading=true;var b=null;if(d.getAttribute("popupatmouse")){var b=this.getSpudLocation();var a=mySpud.container.getScroll();b.top+=Trumba.Event.pointerY(f)-a.top;b.left+=Trumba.Event.pointerX(f)-a.left;b.height=0;b.width=0}window.setTimeout(function(){if(Trumba.Spuds.popupId==c&&mySpud.container._loaded){Trumba.Spuds.showPopup(d,true,b)}d._loading=false},200)},popupOnMouseOut:function(d,c){d=d||window.event;c=$(c);Trumba.Event.stop(d);var b=this.getPopupId(c);Trumba.Spuds.popupId=null;var a=controller.findSpud("popupId",b);if(a){window.setTimeout(function(){if(Trumba.Spuds.popupId!=b){a.close()}},500)}},_onResize:function(a){var b={left:this._position.left,top:this._position.top,width:this._position.width,height:a.height};Trumba.Spuds.clipPopupToScreen(b);this._spud.container.setPosition({top:b.top})}};Trumba.XmlRequest={create:function(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP")}}return null},asyncGet:function(b,a){var c=Trumba.XmlRequest.create();if(c==null){alert("We're sorry but your browser does not support our requirements.");return}var d=new Date();c.open("GET",b,true);c.onreadystatechange=function(){if(c.readyState==4){var e=new Date();a(c)}};c.send(null)}};Trumba.Util={CleanerRegExp:/~\\u([0-9a-f]{4})/ig,CleanerProc:function(a,b){return String.fromCharCode(parseInt(b,16))},cleanUnicode:function(b,a){b.each(function(c){a.each(function(d){c[d]=c[d].replace(Trumba.Util.CleanerRegExp,Trumba.Util.CleanerProc)})})}};Trumba.ClientTZ={UTCoffset:0,UTCoffsetT:"+00:00",hasDST:false,getBrowserTZ:function(){var a=Trumba.ClientTZ;var b=new Date();var g=new Date(b.getFullYear(),1-1,1,0,0,0,0);var h=-g.getTimezoneOffset();a.UTCoffset=h;var e=new Date(b.getFullYear(),6-1,1,0,0,0,0);var f=-e.getTimezoneOffset();if(h!=f){a.hasDST=true;if(h-f>=0){a.UTCoffset=f}}f=(h<0?-h:h)/60;var d=Math.floor(f);var c=f-d;a.UTCoffsetT=(h<0?"-":"+")+(d<10?"0":"")+d+":"+(c==0?"0":"")+(c*60);return a.UTCoffset}};Trumba.ClientTZ.getBrowserTZ();if(typeof(SpudConnector)=="undefined"){SpudConnector={_listeners:{},addEventListener:function(a,b){if(this._listeners[a]==null){this._listeners[a]=[]}this._listeners[a].push(b)}}}function filterNavigate(c,b,a){filterNavigateMulti([{name:c,value:b}],a)}function filterNavigateMulti(f,d){var e=(typeof(mySpud)!="undefined"&&mySpud);var h=e?mySpud.getQueryString():document.location.search;var c=new TQueryString(h);c.removeAt(c.findByName("widget"));c.removeAt(c.findByName("eventid"));c.removeAt(c.findByName("view"));c.removeAt(c.findByName("calendar"));c.removeAt(c.findByName("spudConfig"));c.removeAt(c.findByName("objecttype"));for(var b=0;b<f.length;b++){var g=f[b];if(g.name=="mixin"){removeParm(c,"mixout")}else{if(g.name=="mixout"){removeParm(c,"mixin")}}if(g.value==""){if(e){c.setAt("-"+g.name,null)}else{c.removeAt(c.findByName(g.name))}}else{c.setAt(g.name,g.value)}if(typeof(trumba_FilterDate)!="undefined"&&g.name!="date"){c.setAt("date",trumba_FilterDate);removeParm(c,"index")}if(g.name=="date"){removeParm(c,"index")}if(g.name=="search"||g.name=="mixin"||g.name=="mixout"||g.name.substr(0,6)=="filter"){removeParm(c,"index")}if(typeof(controller)!="undefined"&&d){mySpud.setSpudCookieProperty("url."+g.name,g.value)}}h=c.to();if(typeof(controller)!="undefined"){Nav(h)}else{if(e){c.setAt("-eventid",null);c.setAt("-view",null);Nav(c.to())}else{if(h==""){var a=window.location.href.indexOf("?");if(a!=-1){window.location.href=window.location.href.substring(0,a)}}else{window.location.search="?"+h}}}}function removeParm(b,a){b.removeAt(b.findByName(a));b.setAt("-"+a,null)}function doSearch(){var a=document.getElementById("txtSearch");if(a&&typeof(a.value)!="undefined"){filterNavigate("search",a.value)}}function doSearchEnter(a){if(checkEnter(a)){doSearch();return false}return true}function checkEnter(a){if(window.event&&window.event.keyCode==13){window.event.returnValue=false;window.event.cancelBubble=true;return true}else{if(a&&a.which==13){a.preventDefault();a.stopPropagation();return true}}return false}function AddClickOnEnterHandler(c,a){var b=function(d){if(checkEnter(d)){$(a).click();return false}return true};Trumba.Event.observe($(c),"keypress",b,false)}function trumba_addStyleRule(f){if(typeof(trumba_addStyleRule.ss)=="undefined"){var c;if(document.createElementNS){c=document.createElementNS("http://www.w3.org/1999/xhtml","style")}else{c=document.createElement("style")}c.setAttribute("type","text/css");c.setAttribute("media","screen");document.getElementsByTagName("head")[0].appendChild(c);trumba_addStyleRule.ss=document.styleSheets.item(document.styleSheets.length-1)}if(tBrowser.css2iedom){var b=f.split("{");b[0]=b[0].split(",");b[1]=b[1].substring(0,b[1].indexOf("}"));try{for(var a=0;a<b[0].length;a++){trumba_addStyleRule.ss.addRule(b[0][a],b[1])}}catch(d){var g="";for(var h in d){g+="\n"+d[h]}log("Error adding rule - is there a comma in the specifier?\n\n"+f+"\n\n"+g)}}else{trumba_addStyleRule.ss.insertRule(f,trumba_addStyleRule.ss.cssRules.length)}}function trumba_addStyleRules(d){if(tBrowser.css2dom||tBrowser.css2iedom){for(var a=0;a<d.length;a++){trumba_addStyleRule(d[a])}}else{var c="";for(var a=0;a<d.length;a++){c+="\n"+d[a]}var b=document.createElement("style");b.setAttribute("type","text/css");b.setAttribute("media","screen");if(tBrowser.safari){b.innerText=c;document.getElementsByTagName("head")[0].appendChild(b)}else{if(tBrowser.opera){b.innerHTML=c;document.body.appendChild(b)}}}}Trumba.addHeadLink=function(j,e,b,a){var h=document.getElementsByTagName("LINK");for(var d=0;d<h.length;d++){var c=h[d].href.match(/^https?:(.+)/);if(c&&c.length>1&&c[1]==b){return}}var g=document.createElement("LINK");g.href=b;g.rel=(j?j:"stylesheet");g.type=(e?e:"text/css");var f=document.head;if(!f){f=document.getElementsByTagName("HEAD")[0]}if(a&&h.length>0){f.insertBefore(g,h[0])}else{f.appendChild(g)}};function getTotalOffset(b){var a=0,c=0;do{a+=b.offsetTop||0;c+=b.offsetLeft||0;b=b.offsetParent}while(b);return{left:c,top:a}}function scrollParent(f){var c=document.getElementById(f);if(c&&window.name!=""){var d=window.parent.document;if(d){var b=d.getElementById(window.name);var a=getTotalOffset(b).top+getTotalOffset(c).top;d.documentElement.scrollTop=a;if(d.documentElement.scrollTop!=a){d.body.scrollTop=a}}}}function scrollTop(){var a=window.parent.document;if(a){a.documentElement.scrollTop=0;a.body.scrollTop=0}}function permaLink(b){var a=new TLocation(window.top.location.href);a.search.setAt("trumbaEmbed","view=event&eventid="+b);window.top.location=a.To()}function getPermaLink(k,h,f,j){try{var g=typeof(permaLinkBase)!="undefined"?permaLinkBase:window.top.location.href;var b=new TLocation(g);var a;if(h){a="view=series&seriesid="+h}if(k){a="view=event&eventid="+k}if(f){a="view=object&objectid="+f}if(j){a+="&key="+j}b.search.setAt("trumbaEmbed",a);var c=b.search.findByName("fb_comment_id");if(c!=-1){b.search.removeAt(c)}if(b.hash.indexOf("/?i=")!=-1){b.hash=""}return b.To()}catch(d){return""}}function setFacebookLink(a,c){var d=document.getElementById("fblink");if(d){var b=getPermaLink(c);if(b==""){d.style.display="none"}else{d.src=a+"&p="+GoodEscape(b)}}}var trumbaPermaLink="";function setPermaLink(b,f,g,a,e){var d=$(a);if(d){var c=getPermaLink(b,f,g,e);if(c==""){d.style.display="none"}else{trumbaPermaLink=c;var h=d.firstChild;while(h){if(h.tagName&&h.tagName=="A"){h.href=c}h=h.nextSibling}}}}function permaLinkShow(c,a){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){return true}var d=document.getElementById(c);if(!d){return false}if(d.style.visibility!="visible"){d.style.visibility="visible";var b=document.getElementById(a);b.value=trumbaPermaLink;b.select();b.focus()}else{d.style.visibility="hidden"}return false}function permaLinkQRCode(a){window.open(a+"qrcode.htm?url="+GoodEscape(trumbaPermaLink),"qrcode","width=500px,height=410px,resizable=1,location=0,menubar=0,toolbar=0,scrollbars=1")}Trumba.EA2={showWindowAbsolute:function(d){var c=null;var f=785;var a=775;var b=false;if(screen&&a>(screen.availHeight-60)){a=(screen.availHeight-60)}if(screen&&f>screen.availWidth){f=screen.availWidth}var g=",width="+f+",height="+a;var h="_atmc2";var e="fullscreen=no,location=no,menubar=no,scrollbars=yes,resizable=yes,status=no,toolbar=no"+g;if(/Android/i.test(navigator.userAgent)){e=""}else{if(/(iPhone|iPad).+Safari/i.test(navigator.userAgent)){h="_blank"}else{if(/Mozilla.+ Firefox/.test(navigator.userAgent)){b=true}}}if(window.parent.$Trumba){c=window.parent.$Trumba.showWindow(d,h,e)}if(c==null){c=window.open(d,h,e)}if(c!=null){if(b){c=window.open(d,h,e)}c.focus()}else{window.alert("Event Actions window blocked by popup blocker.")}},showWindow:function(a){Trumba.EA2.showWindowAbsolute(Atmc2Url+"/"+a)},rsvp:function(b){var a=AddUrlParam(Atmc2RsvpUrl,"invite",b);Trumba.EA2.showWindowAbsolute(a)},selectedEvents:function(){var d="";var b,c;var a=document.getElementsByName("chkea");for(b=0;c=a[b];b++){if(c.getAttribute("type")=="checkbox"&&c.checked){if(d.length!=0){d+=","}d+=c.getAttribute("value")}}return d},eventActionsMulti:function(a){var b=Trumba.EA2.selectedEvents();if(b.length==0){alert("No events selected.\n\nSelect events by clicking the checkbox in each event listing and then choose an action.")}else{Trumba.EA2.showWindow(a+"/"+b)}},signOut:function(a){var b=new XMLHttpRequest();b.onreadystatechange=Trumba.EA2.signOutSuccess;b.open("GET",a,true);b.send()},signOutSuccess:function(a){if(a.currentTarget.readyState==4){window.mySpud.profile=null;TrumbaEAPanel.setSignInStatus()}}};function SelectedTokens(){var d="";var b,c;var a=document.getElementsByName("chkea");for(b=0;c=a[b];b++){if(c.getAttribute("type")=="checkbox"&&c.checked){if(d.length!=0){d+=","}d+=c.getAttribute("value")}}return d}function AddTzParam(b){if(typeof(mySpud)!="undefined"&&mySpud.getQueryString){var a=new TQueryString(mySpud.getQueryString()).getAt("zone");if(a!=null&&a!=""){b=AddUrlParam(b,"tz",a[1])}}return b}function AddVisitorEmail(a){if(typeof(mySpud)!="undefined"&&mySpud){var b=mySpud.getProperty("visitorEmail");if(b&&b!=""){a=AddUrlParam(a,"visitorEmail",b)}var c=mySpud.getProperty("visitorName");if(c&&c!=""){a=AddUrlParam(a,"visitorName",c)}}return a}function ATMCBase(a){ATMCOpen(AddVisitorEmail(AddTzParam(a)))}function ATMCOpen(b){var a=window.open(b,"_atmc","fullscreen=no,location=no,menubar=no,scrollbars=yes,resizable=yes,status=no,toolbar=no,width=785,height=775");if(a!=null){a.focus()}else{window.alert("Event Actions window blocked by popup blocker.")}}function AddUrlParam(b,a,c){b+=(b.indexOf("?")==-1)?"?":"&";return b+a+"="+c}function EventAction(c,b){var a=AddUrlParam(AtmcUrl,"ea",c);a=AddUrlParam(a,"e32",b);ATMCBase(a)}function RsvpEvent(b){var a=AddUrlParam(AtmcUrl,"ea","rsvp");a=AddUrlParam(a,"invite",b);ATMCBase(a)}function SubscribeCalendar(a){ATMCBase(AddUrlParam(AtmcUrl,"subscribe",a))}function SelectAllEA(){var a=document.getElementsByName("selectea");var b=a[0].innerHTML;for(i=0;(checkbox=document.getElementsByTagName("input")[i]);i++){if(checkbox.getAttribute("type")=="checkbox"&&checkbox.id.indexOf(atmcPrefix)==0){checkbox.checked=(b=="deselect all events")?false:true}}for(i=0;i<a.length;i++){a[i].innerHTML=(b=="select all events")?"deselect all events":"select all events"}}function EASelect(f){var e=document.getElementsByTagName("input");for(var c=0;c<e.length;c++){var d=e[c];if(d.getAttribute("type")==="checkbox"&&d.id.indexOf("AtmcChk")>=0){d.checked=f;if(d.dispatchEvent){var b=d.getAttribute("onchange");if(b){var a=document.createEvent("Events");a.initEvent("change",false,false);d.dispatchEvent(a)}}}}}function EACheckSM(c,b,d,a){if(a){if(c.checked){navselecttothis(b)}else{navselecttothis(d)}}else{if(c.checked){jsNav(b)}else{jsNav(d)}}}function EACheckSMEmbed(checkbox,checked,unchecked){if(checkbox.checked){eval(checked)}else{eval(unchecked)}}function EASelected(b){var a=SelectedTokens();if(b.selectedIndex>0&&a.length==0){alert("No events selected.\n\nSelect events by clicking the checkbox in each event listing and then choose an action.");b.selectedIndex=0}else{EAPostSelectedMenu(a,b)}}function EASelectedAction(a){var b=SelectedTokens();if(b.length==0){alert("No events selected.\n\nSelect events by clicking the checkbox in each event listing and then choose an action.")}else{EAPostSelectedTokens(b,a)}}function EAPostSelectedMenu(b,c){var a=(c==null)?"atmc":c.options[c.selectedIndex].value;EAPostSelectedTokens(b,a);c.selectedIndex=0}function EAPostSelectedTokens(d,c){ATMCOpen(AtmcLogoUrl);var b=document.getElementById("AtmcSubmitForm");if(b==null){b=document.createElement("form");b.id="AtmcSubmitForm";b.target="_atmc";b.method="post";document.body.appendChild(b)}var a=document.getElementById("AtmcSubmitTokens");if(a==null){a=document.createElement("input");a.id="AtmcSubmitTokens";a.type="hidden";a.name="e32";b.insertBefore(a,null)}a.value=d;if(c!="none"&&c!=""){b.action=AddVisitorEmail(AddTzParam(AddUrlParam(AtmcUrl,"ea",c)));b.submit()}}function EASelectedEvent(a,c){var b=c==null?"atmc":c.options[c.selectedIndex].value;EAPostSelectedTokens(a,b);c.selectedIndex=0}function ClosePseudoSelectNow(b,a){ResetEAInitialValues();document.getElementById(a).style.display="none";document.getElementById(b).onmouseover=null}var cpsTimeoutId=null;function ClosePseudoSelect(b,a){ResetEAInitialValues();if(cpsTimeoutId!=null){window.clearTimeout(cpsTimeoutId)}cpsTimeoutId=window.setTimeout("ClosePseudoSelectNow('"+b.toString()+"','"+a.toString()+"')",100)}function OpenPseudoSelect(c,b){_isEaEventDropDownActive=true;if(cpsTimeoutId!=null){window.clearTimeout(cpsTimeoutId)}var a=document.getElementById(b);var d=document.getElementById(c);a.style.left=(GetLeft(d)+(tBrowser.firefox?3:(tBrowser.ie7||tBrowser.ie8)?1:0)).toString()+"px";a.style.top=(GetTop(d)+d.offsetHeight+(tBrowser.firefox?3:0)).toString()+"px";a.style.width=(d.offsetWidth+(tBrowser.firefox?-1:0)).toString()+"px";a.style.display="";if(d.onmouseover==null){d.onmouseover=function(){OpenPseudoSelect(c.toString(),b.toString())}}}function TogglePseudoSelect(b,a){_eaEventCurrentRow=-1;_eaSelectionActive=false;_eaEventCurrentRow=GetFirstVisibleEAItem();ResetEAItemStyle();if(document.getElementById(a).style.display!="none"){ClosePseudoSelectNow(b,a);_isEaEventDropDownActive=false}else{OpenPseudoSelect(b,a);_isEaEventDropDownActive=true}}function TogglePseudoSelectOnKeyDown(d,b,a){var c=GetKeyCode(d);if(c==13){OpenPseudoSelect(b,a)}if(c==27){ClosePseudoSelect(b,a)}}var _eaEventCurrentRow=-2;var _isEaEventDropDownActive=false;var _currentEATableID="";var _currentEATableRow=null;var _currentRowCount=0;var _eaSelectionActive=false;function ResetEAInitialValues(){_isEaEventDropDownActive=false;_eaSelectionActive=false;_eaEventCurrentRow=GetFirstVisibleEAItem();ResetEAItemStyle()}function GetKeyCode(b){var a=0;b=(window.event)?event:b;a=(b.keyCode)?b.keyCode:b.charCode;return a}function GetCurrentEATableID(a){_currentEATableID=a;_currentEATableRow=document.getElementById(_currentEATableID).getElementsByTagName("tbody")[0].getElementsByTagName("tr");_currentRowCount=_currentEATableRow.count?_currentEATableRow.count:_currentEATableRow.length;_eaEventCurrentRow=GetFirstVisibleEAItem()}function GetFirstVisibleEAItem(){var b=-1;for(var a=0;a<_currentRowCount;a++){if(_currentEATableRow[a].style.display!="none"){b=a-1;break}}return b}function ChangeEventActionRow(){_currentEATableRow[_eaEventCurrentRow].focus();ResetEAItemStyle();document.getElementById(_currentEATableRow[_eaEventCurrentRow].id).getElementsByTagName("td")[0].className="twEaMenuItem ddihover"}function ResetEAItemStyle(){for(var a=0;a<_currentRowCount;a++){_currentEATableRow[a].getElementsByTagName("td")[0].className="twEaMenuItem"}}function ChangeEACurrentRow(b,a){_eaEventCurrentRow=GetFirstVisibleEAItem();document.onkeydown=function(c){var d=GetKeyCode(c);if(_isEaEventDropDownActive){if(d==38){_eaEventCurrentRow--;if(_eaEventCurrentRow<0){_eaEventCurrentRow=0}if(_currentEATableRow[_eaEventCurrentRow].style.display=="none"){if(_eaEventCurrentRow<=0){_eaEventCurrentRow=1}else{_eaEventCurrentRow=_eaEventCurrentRow-1}}_eaSelectionActive=true;ChangeEventActionRow()}if(d==40){_eaEventCurrentRow++;if(_eaEventCurrentRow>=_currentRowCount){_eaEventCurrentRow=_currentRowCount-1}if(_currentEATableRow[_eaEventCurrentRow].style.display=="none"){if(_eaEventCurrentRow>=_currentRowCount){_eaEventCurrentRow=_currentRowCount-2}else{_eaEventCurrentRow=_eaEventCurrentRow+1}}_eaSelectionActive=true;ChangeEventActionRow()}if(d==13){if(_isEaEventDropDownActive){if(_eaEventCurrentRow>=0&&_eaSelectionActive){EASelectedAction(_currentEATableRow[_eaEventCurrentRow].getElementsByTagName("td")[0].getAttribute("eventactionname"));setTimeout(function(){ClosePseudoSelect(a,b);_eaEventCurrentRow=GetFirstVisibleEAItem();ResetEAItemStyle();_eaSelectionActive=false},100)}}}c.preventDefault()}}}function GetTop(a){var b=0;do{b+=a.offsetTop}while(a=a.offsetParent);return b}function GetLeft(a){var b=0;do{b+=a.offsetLeft}while(a=a.offsetParent);return b}function SaveTabIndex(a,b){var d=a.get_element().getAttribute("cookiename");var c=new TCookie(document,d,24);c.Load();c.tabIndex=a.get_activeTabIndex();c.Store();pubSettingsInitialize()}function validateTab(a,d){for(var c=0;c<Page_Validators.length;c++){var b=d.get_element();if(!Page_Validators[c].isvalid&&$get(Page_Validators[c].id,b)){a.set_activeTab(d);return true}}return false}function validateTabs(c){if(typeof(Page_Validators)!="undefined"){var b=$find(c);var a=b.get_activeTab();var f=validateTab(b,a);var e=b.get_tabs();for(var d=0;d<e.length;d++){if(!f){f=validateTab(b,e[d])}}}}function expandCollapse(c,a){var b=$(c);var d=$(a);if(d&&b){if(d.style.display=="none"){d.style.display="block";b.src="images/CheckMinus.gif"}else{d.style.display="none";b.src="images/CheckPlus.gif"}mySpud.resize()}}function setCheckboxes(c,b){if(c.nodeType==1){if(c.tagName.toLowerCase()=="input"&&c.type.toLowerCase()=="checkbox"){if(!c.disabled){c.checked=!b;try{c.click()}catch(c){}c.checked=b}}else{if(c.childNodes){for(var a=0;a<c.childNodes.length;a++){setCheckboxes(c.childNodes[a],b)}}}}}function isCheckboxSet(b){if(b.nodeType==1){if(b.tagName.toLowerCase()=="input"&&b.type.toLowerCase()=="checkbox"&&b.checked){return true}else{if(b.childNodes){for(var a=0;a<b.childNodes.length;a++){if(isCheckboxSet(b.childNodes[a])){return true}}}}}return false}function popupPosition(c,a){var h=typeof window.screenX!="undefined"?window.screenX:window.screenLeft;var g=typeof window.screenY!="undefined"?window.screenY:window.screenTop;var f=typeof window.outerWidth!="undefined"?window.outerWidth:document.documentElement.clientWidth;var b=typeof window.outerHeight!="undefined"?window.outerHeight:(document.documentElement.clientHeight-22);h=(h<0)?window.screen.width+h:h;var e=parseInt(h+((f-c)/2),10);var d=parseInt(g+((b-a)/2.5),10);return Trumba.String.format("width={0},height={1},left={2},top={3}",c,a,e,d)}function tweet(){var f=mySpud.getEventSummary();var d=mySpud.getPermalink();var e=new TQueryString();e.setAt("url",d);var a=120;var c=f.description.substr(0,a);if(c.length+f.datetime.length+2<a){c+=": "+f.datetime}if(c.length+f.location.length+2<a){c+=": "+f.location}e.setAt("text",c);var g="http://twitter.com/share?"+e.to();var b="fullscreen=no,location=no,menubar=no,scrollbars=yes,resizable=yes,status=no,toolbar=no,"+popupPosition(550,275);window.open(g,"_twitter",b)}function linkedin(){var e=mySpud.getEventSummary();var c=mySpud.getPermalink();var d=new TQueryString();d.setAt("mini","true");d.setAt("url",c);d.setAt("title",e.description);d.setAt("summary",e.datetime+(e.location?": "+e.location:""));var a="http://www.linkedin.com/shareArticle?"+d.to();var b="fullscreen=no,location=no,menubar=no,scrollbars=yes,resizable=yes,status=no,toolbar=no,"+popupPosition(577,370);window.open(a,"_linkedin",b)}var fbCommentHeight=0;function setupCommentResizer(){if(navigator.userAgent.match(/iPad/i)!=null){$("divCommentsHeader").style.display="none";mySpud.resize();return}var a=$("fbComments");a.innerHTML=Trumba.String.format("<fb:comments href='{0}' num_posts='{1}' width='{2}' colorscheme='{3}'></fb:comments>",trumbaPermaLink,commentPosts,commentWidth,commentColor);if(FB.XFBML.parse){setTimeout(function(){FB.XFBML.parse(a,checkCommentHeight)},0)}mySpud.resize();fbCommentHeight=a.offsetHeight;window.setInterval(checkCommentHeight,100)}function checkCommentHeight(){var a=$("fbComments").offsetHeight;if(a!=fbCommentHeight){document.body.style.height="";mySpud.resize();fbCommentHeight=a}}function fixListWrap(d){var h=$(d);if(h&&h.nodeName=="SPAN"&&h.className!="multiListWrapper"){var c=[];while(h.childNodes.length>0){var f=h.childNodes[0];var g=h.childNodes[1];var e=document.createElement("span");e.style.whiteSpace="nowrap";h.removeChild(f);h.removeChild(g);e.appendChild(f);e.appendChild(g);c[c.length]=e}for(var b=0;b<c.length;b++){h.appendChild(c[b]);var a=document.createElement("span");if(tBrowser.ie&&tBrowser.ieVersion>6&&tBrowser.ieVersion<10){a.innerHTML="&zwsp; &zwsp;"}else{a.innerHTML=" "}h.appendChild(a)}}}function triggerEvent(b,d,c){if("fireEvent" in document.getElementById(b)){document.getElementById(b).fireEvent(d)}else{var a=document.createEvent("HTMLEvents");a.initEvent(c,false,true);document.getElementById(b).dispatchEvent(a)}}function setTextBoxOnDropDownChange(e,d){var f=new Array();for(var c=0;c<e.options.length;c++){f[c]=e.options[c].value}var a=false;for(var b=0;b<f.length;b++){if(f[b]==d){a=true;break}}e.value=d;if(!a){e.selectedIndex=-1}}function getUrlVars(b){var e=[],d;var a=b.slice(b.indexOf("?")+1).split("&");for(var c=0;c<a.length;c++){d=a[c].split("=");e.push(d[0]);e[d[0]]=d[1]}return e}function convertFileSizeFromByte(c){var a=1024;var h=Math.pow(a,2);var e=Math.pow(a,3);var l=Math.pow(a,4);var k="0";if(c<a){var j=" bytes";if(c==1){j=" byte"}k=c+j}if(c>=a&&c<h){var f=c/a;k=f.toFixed(2)+" KB"}if(c>=h&&c<e){var d=c/h;k=d.toFixed(2)+" MB"}if(c>=e&&c<l){var b=c/e;k=b.toFixed(2)+" GB"}if(c>=l){var g=c/l;k=g.toFixed(2)+" TB"}return k}function selectCodeText(){var a=false;$j(".spudScript").mousedown(function(){$j(document).mousemove(function(){a=true;$j(document).unbind("mousemove")})}).mouseup(function(){var d=a;a=false;$j(document).unbind("mousemove");if(!d){if(document.selection){var b=document.body.createTextRange();b.moveToElementText($j(this).get(0));b.select()}else{if(window.getSelection){var c=window.getSelection();var b=document.createRange();b.selectNodeContents(this);c.removeAllRanges();c.addRange(b)}}}})}var _visiblePubSettingHeight=100;function collapsePublicationSettings(){pubSettingsInitialize();pubSettingsToggle()}function pubSettingsInitialize(){$j(".settingsTableOuterWrapper").each(function(){var b=$j(this).find(".settingsTableWrapper").find(".settingsTable").height();var a=getScriptHeight($j(this).parent().parent());if(a>0){if(a<_visiblePubSettingHeight){if(b<_visiblePubSettingHeight){$j(this).height(b+"px");$j(this).parent().find(".settingsTableWrapperButton").hide()}else{$j(this).height(_visiblePubSettingHeight+"px");$j(this).parent().find(".settingsTableWrapperButton").show()}}else{if(b<a){$j(this).height(b+"px");$j(this).parent().find(".settingsTableWrapperButton").hide()}else{$j(this).height(a+"px");$j(this).parent().find(".settingsTableWrapperButton").show()}}}else{if(b<_visiblePubSettingHeight){$j(this).height(b+"px");$j(this).parent().find(".settingsTableWrapperButton").hide()}else{$j(this).height(_visiblePubSettingHeight+"px");$j(this).parent().find(".settingsTableWrapperButton").show()}}})}function pubSettingsClose(){}function pubSettingsToggle(){$j(".settingsTableWrapperButton").on("click",function(){var c=$j(this).parent().find(".settingsTableOuterWrapper").find(".settingsTableWrapper").find(".settingsTable").height()+20;var b=getScriptHeight($j(this).parent().parent());var a=_visiblePubSettingHeight;if(b>0){if(b<_visiblePubSettingHeight){a=_visiblePubSettingHeight}else{a=b}}else{a=_visiblePubSettingHeight}if($j(this).find(".iconText").html().toLowerCase()=="hide"){$j(this).parent().find(".settingsTableOuterWrapper").animate({height:a+"px"},500);$j(this).find(".iconText").html("More");$j(this).find(".iconButton").html('<img src="images/arrow_down.png" alt="More Arrow" />')}else{$j(this).parent().find(".settingsTableOuterWrapper").animate({height:c},500);$j(this).find(".iconText").html("Hide");$j(this).find(".iconButton").html('<img src="images/arrow_up.png" alt="Hide Arrow" />')}})}function getScriptHeight(a){var b=0;if(a.find(".spudCellRight").find(".spudScript").length>0){b=a.parent().parent().find(".spudCell.spudCellRight").find(".spudScript").height()+21}return b}function setSignInEdit(f,e,c,b,d){var h=$(f);var g=$(e);var j=$(c);var a=$(b);if(h&&g&&a){if(typeof(d)=="undefined"){d=a.value=="1"}else{a.value=d?"1":"0"}if(h){h.style.display=d?"":"none"}if(g){g.style.display=d?"none":""}if(j){j.style.display=d?"none":""}}};